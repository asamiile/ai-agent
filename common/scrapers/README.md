# common/scrapers/

## 概要

このディレクトリは、特定のウェブサイトから情報を抽出するためのスクレイピング関連のモジュールを格納します。主にPlaywrightライブラリを使用し、ECサイト（Yahoo!ショッピング、ZOZOなど）から商品情報やリンクを収集する機能を提供します。これらのスクレイパーは、より高レベルの「エージェント」がデータソースとして利用することを想定しています。

## ディレクトリ構成


common/scrapers/
├── yahoo.py
├── zozo.py
└── __init__.py


## 各ファイル/モジュールの説明

| ファイル名          | 説明                                                                                                                                                                                                                                                                                       |
| :------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `yahoo.py`          | Yahoo!ショッピングから特定の商品（DIESEL KIDSのアウトレット品）のリンクを収集するためのスクレイピングモジュールです。Playwrightを使用して検索結果ページを巡回し、商品詳細ページへのURLを抽出します。ページネーションを自動で処理し、存在するすべてのページのリンクを収集します。     |
| `zozo.py`           | ZOZOの特定のブランドページ（DIESEL KIDS）から商品リンクを収集するためのスクレイピングモジュールです。PlaywrightとBeautifulSoupを組み合わせて使用しますが、サイトの自動化検知が厳しいため、現在は「Access Denied」となることが多く、安定した動作は困難であると想定されています。 |
| `__init__.py`       | `scrapers` ディレクトリをPythonパッケージとして認識させるための空ファイルです。                                                                                                                                                                                                              |

## 実行方法

`common/scrapers/` 内の各スクレイパーモジュールは、`if __name__ == "__main__":` ブロックを持っており、単体で実行して動作を確認することが可能です。

### Yahoo!ショッピングスクレイパーの実行例

Yahoo!ショッピングからDIESEL KIDS関連の全商品リンクを収集します。

bash
python common/scrapers/yahoo.py


### ZOZOスクレイパーの実行例

ZOZOのDIESEL KIDSブランドページから商品リンクを収集します。ただし、現状ではサイト側の自動化検知によりアクセスが困難な場合があります。

bash
python common/scrapers/zozo.py


これらのスクレイパーは、`agents/fashion_diesel_kids/main.py` のような上位エージェントからインポートされ、特定のタスクの一部として利用されることが主な用途です。

## 環境変数

このディレクトリ内のスクレイパーモジュール自体は直接環境変数を必要としません。
しかし、Playwrightライブラリを使用するため、以下のコマンドでブラウザをインストールしておく必要があります。

bash
playwright install


また、これらのスクレイパーを利用する上位のモジュール（例: `agents/fashion_diesel_kids/main.py`）では、DIESEL KIDSの商品ページをAIで分析したり、結果をDiscordに通知するために以下の環境変数が必要となる場合があります。

*   `GOOGLE_AI_STUDIO_API_KEY`: Google Gemini APIにアクセスするためのAPIキー
*   `DISCORD_WEBHOOK_URL`: Discordへの通知に使用するWebhook URL